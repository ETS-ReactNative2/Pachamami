{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/taliabahar/Desktop/Pachamami/node_modules/react-native-carousel-view/src/carousel.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, Children } from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport reactMixin from 'react-mixin';\nimport TimerMixin from 'react-timer-mixin';\nimport CarouselPager from \"./carouselPager\";\nimport styles from \"./styles/carousel\";\n\nvar Carousel = function (_Component) {\n  _inherits(Carousel, _Component);\n\n  var _super = _createSuper(Carousel);\n\n  function Carousel(props) {\n    var _this;\n\n    _classCallCheck(this, Carousel);\n\n    _this = _super.call(this, props);\n\n    if (!props.height) {\n      throw new Error('You must set a height props.');\n    }\n\n    _this.state = {\n      activePage: props.initialPage > 0 ? props.initialPage : 0\n    };\n    _assertThisInitialized(_this).getWidth = _this.getWidth.bind(_assertThisInitialized(_this));\n    _assertThisInitialized(_this).indicatorPressed = _this.indicatorPressed.bind(_assertThisInitialized(_this));\n    _assertThisInitialized(_this).renderPageIndicator = _this.renderPageIndicator.bind(_assertThisInitialized(_this));\n    _assertThisInitialized(_this)._setUpTimer = _this._setUpTimer.bind(_assertThisInitialized(_this));\n    _assertThisInitialized(_this)._animateNextPage = _this._animateNextPage.bind(_assertThisInitialized(_this));\n    _assertThisInitialized(_this)._onAnimationBegin = _this._onAnimationBegin.bind(_assertThisInitialized(_this));\n    _assertThisInitialized(_this)._onAnimationEnd = _this._onAnimationEnd.bind(_assertThisInitialized(_this));\n    _assertThisInitialized(_this)._filterChildren = _this._filterChildren.bind(_assertThisInitialized(_this));\n    _assertThisInitialized(_this)._resetPager = _this._resetPager.bind(_assertThisInitialized(_this));\n\n    _this._filterChildren();\n\n    return _this;\n  }\n\n  _createClass(Carousel, [{\n    key: \"_filterChildren\",\n    value: function _filterChildren() {\n      var children = this.props.children;\n\n      if (!children) {\n        throw new Error('You have to set children inside Carousel component');\n      }\n\n      this.children = Children.toArray(children).filter(function (child) {\n        return child;\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this._filterChildren();\n\n      this.clearTimeout(this.timer);\n\n      this._resetPager();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._resetPager();\n    }\n  }, {\n    key: \"indicatorPressed\",\n    value: function indicatorPressed(activePage) {\n      this.setState({\n        activePage: activePage\n      });\n      this.pager.scrollToPage(activePage);\n    }\n  }, {\n    key: \"_resetPager\",\n    value: function _resetPager() {\n      var initialPage = this.props.initialPage;\n\n      if (initialPage > 0) {\n        this.setState({\n          activePage: initialPage\n        });\n        this.pager.scrollToPage(initialPage, false);\n      }\n\n      if (this.children) {\n        this._setUpTimer();\n      }\n    }\n  }, {\n    key: \"_setUpTimer\",\n    value: function _setUpTimer() {\n      var animate = this.props.animate;\n\n      if (this.timer) {\n        this.clearTimeout(this.timer);\n      }\n\n      if (animate && this.children.length > 1) {\n        this.timer = this.setTimeout(this._animateNextPage, this.props.delay);\n      }\n    }\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      var width = this.props.width;\n\n      if (width) {\n        return width;\n      }\n\n      return Dimensions.get('window').width;\n    }\n  }, {\n    key: \"_animateNextPage\",\n    value: function _animateNextPage() {\n      var activePage = this.state.activePage;\n\n      if (activePage < this.children.length - 1) {\n        activePage++;\n      } else if (this.props.loop) {\n        activePage = 0;\n      } else if (!this.props.loop) {\n        this.clearTimeout(this.timer);\n        return;\n      }\n\n      this.indicatorPressed(activePage);\n\n      this._setUpTimer();\n    }\n  }, {\n    key: \"_onAnimationBegin\",\n    value: function _onAnimationBegin() {\n      var onScrollBegin = this.props.onScrollBegin;\n\n      if (onScrollBegin) {\n        onScrollBegin();\n      }\n\n      this.clearTimeout(this.timer);\n    }\n  }, {\n    key: \"_onAnimationEnd\",\n    value: function _onAnimationEnd(activePage) {\n      var onPageChange = this.props.onPageChange;\n\n      if (onPageChange) {\n        onPageChange(activePage);\n      }\n\n      this.setState({\n        activePage: activePage\n      }, this._setUpTimer());\n    }\n  }, {\n    key: \"renderPageIndicator\",\n    value: function renderPageIndicator() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          hideIndicators = _this$props.hideIndicators,\n          indicatorOffset = _this$props.indicatorOffset,\n          indicatorAtBottom = _this$props.indicatorAtBottom,\n          indicatorSpace = _this$props.indicatorSpace,\n          indicatorColor = _this$props.indicatorColor,\n          inactiveIndicatorColor = _this$props.inactiveIndicatorColor,\n          indicatorSize = _this$props.indicatorSize,\n          indicatorText = _this$props.indicatorText,\n          inactiveIndicatorText = _this$props.inactiveIndicatorText;\n      var activePage = this.state.activePage;\n\n      if (hideIndicators === true) {\n        return null;\n      }\n\n      var indicators = [];\n      var positionIndicatorStyle = indicatorAtBottom ? {\n        bottom: indicatorOffset\n      } : {\n        top: indicatorOffset\n      };\n      var indicatorWidth = this.children.length * indicatorSpace;\n      var style;\n      var position;\n      position = {\n        minWidth: indicatorWidth,\n        left: (this.getWidth() - indicatorWidth) / 2\n      };\n      this.children.forEach(function (child, i) {\n        style = i === activePage ? {\n          color: indicatorColor\n        } : {\n          color: inactiveIndicatorColor\n        };\n        indicators.push(React.createElement(Text, {\n          style: [style, {\n            fontSize: indicatorSize\n          }],\n          key: i,\n          onPress: function onPress() {\n            return _this2.indicatorPressed(i);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 9\n          }\n        }, i === activePage ? indicatorText : inactiveIndicatorText));\n      });\n\n      if (indicators.length === 1) {\n        return null;\n      }\n\n      return React.createElement(View, {\n        style: [styles.pageIndicator, position, positionIndicatorStyle],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 7\n        }\n      }, indicators);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          height = _this$props2.height,\n          contentContainerStyle = _this$props2.contentContainerStyle,\n          onScroll = _this$props2.onScroll;\n      var width = this.getWidth();\n      return React.createElement(View, {\n        style: {\n          width: width\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          width: width,\n          height: height,\n          overflow: 'hidden'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 9\n        }\n      }, React.createElement(CarouselPager, {\n        ref: function ref(pager) {\n          _this3.pager = pager;\n        },\n        width: width,\n        height: height,\n        contentContainerStyle: [styles.contentContainer, contentContainerStyle],\n        onScroll: onScroll,\n        onBegin: this._onAnimationBegin,\n        onEnd: this._onAnimationEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }\n      }, this.children)), this.renderPageIndicator());\n    }\n  }]);\n\n  return Carousel;\n}(Component);\n\nCarousel.defaultProps = {\n  hideIndicators: false,\n  indicatorColor: '#000000',\n  indicatorSize: 20,\n  inactiveIndicatorColor: '#999999',\n  indicatorAtBottom: true,\n  indicatorOffset: 0,\n  indicatorText: '●',\n  inactiveIndicatorText: '●',\n  width: null,\n  height: 200,\n  initialPage: 0,\n  indicatorSpace: 20,\n  animate: true,\n  delay: 1000,\n  loop: true,\n  onScroll: function onScroll() {}\n};\nexport { Carousel as default };\n;\nreactMixin(Carousel.prototype, TimerMixin);","map":{"version":3,"sources":["/Users/taliabahar/Desktop/Pachamami/node_modules/react-native-carousel-view/src/carousel.js"],"names":["React","Component","Children","reactMixin","TimerMixin","CarouselPager","styles","Carousel","props","height","Error","state","activePage","initialPage","getWidth","bind","indicatorPressed","renderPageIndicator","_setUpTimer","_animateNextPage","_onAnimationBegin","_onAnimationEnd","_filterChildren","_resetPager","children","toArray","filter","child","nextProps","clearTimeout","timer","setState","pager","scrollToPage","animate","length","setTimeout","delay","width","Dimensions","get","loop","onScrollBegin","onPageChange","hideIndicators","indicatorOffset","indicatorAtBottom","indicatorSpace","indicatorColor","inactiveIndicatorColor","indicatorSize","indicatorText","inactiveIndicatorText","indicators","positionIndicatorStyle","bottom","top","indicatorWidth","style","position","minWidth","left","forEach","i","color","push","fontSize","pageIndicator","contentContainerStyle","onScroll","overflow","contentContainer","defaultProps","prototype"],"mappings":"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","sourcesContent":["/**\n * @flow\n */\n\nimport React, {Component, Children} from 'react';\nimport {\n  Dimensions,\n  Text,\n  View,\n} from 'react-native';\nimport reactMixin from 'react-mixin';\nimport TimerMixin from 'react-timer-mixin';\nimport CarouselPager from './carouselPager';\nimport styles from './styles/carousel';\n\ntype Props = {\n  hideIndicators: boolean,\n  indicatorColor: string,\n  indicatorSize: number,\n  inactiveIndicatorColor: string,\n  indicatorAtBottom: boolean,\n  indicatorOffset: number,\n  indicatorText: string,\n  inactiveIndicatorText: string,\n  width: ?number,\n  height: number,\n  initialPage: number,\n  indicatorSpace: number,\n  animate: boolean,\n  delay: number,\n  loop: boolean,\n  contentContainerStyle?: {[attr: string]: any},\n  children: any,\n  onPageChange?: (number) => void,\n  onScrollBegin?: () => void,\n  onScroll?: () => void,\n}\n\nexport default class Carousel extends Component {\n  props: Props\n  state: {\n    activePage: number\n  }\n  pager: CarouselPager\n  children: any[]\n  timer: any\n  clearTimeout: any\n  setTimeout: any\n\n  static defaultProps = {\n    hideIndicators: false,\n    indicatorColor: '#000000',\n    indicatorSize: 20,\n    inactiveIndicatorColor: '#999999',\n    indicatorAtBottom: true,\n    indicatorOffset: 0,\n    indicatorText: '●',\n    inactiveIndicatorText: '●',\n    width: null,\n    height: 200,\n    initialPage: 0,\n    indicatorSpace: 20,\n    animate: true,\n    delay: 1000,\n    loop: true,\n    onScroll: () => {},\n  }\n\n  constructor(props: Props) {\n    super(props);\n\n    if (!props.height) {\n      throw new Error('You must set a height props.');\n    }\n\n    this.state = {\n      activePage: props.initialPage > 0 ? props.initialPage : 0,\n    };\n\n    (this: any).getWidth = this.getWidth.bind(this);\n    (this: any).indicatorPressed = this.indicatorPressed.bind(this);\n    (this: any).renderPageIndicator = this.renderPageIndicator.bind(this);\n    (this: any)._setUpTimer = this._setUpTimer.bind(this);\n    (this: any)._animateNextPage = this._animateNextPage.bind(this);\n    (this: any)._onAnimationBegin = this._onAnimationBegin.bind(this);\n    (this: any)._onAnimationEnd = this._onAnimationEnd.bind(this);\n    (this: any)._filterChildren = this._filterChildren.bind(this);\n    (this: any)._resetPager = this._resetPager.bind(this);\n    this._filterChildren();\n  }\n\n  _filterChildren() {\n    const {children} = this.props;\n\n    if (!children) {\n      throw new Error('You have to set children inside Carousel component');\n    }\n\n    // filter undefined children\n    this.children = Children.toArray(children).filter((child) => child);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    this._filterChildren();\n\n    // when received props it will update all views, with new props.\n    this.clearTimeout(this.timer);\n    this._resetPager();\n  }\n\n  componentDidMount() {\n    this._resetPager();\n  }\n\n  indicatorPressed(activePage: number) {\n    this.setState({activePage});\n    this.pager.scrollToPage(activePage);\n  }\n\n  _resetPager() {\n    const {initialPage} = this.props;\n    if (initialPage > 0) {\n      this.setState({activePage: initialPage});\n      this.pager.scrollToPage(initialPage, false);\n    }\n\n    if (this.children) {\n      this._setUpTimer();\n    }\n  }\n\n  _setUpTimer() {\n    const {animate} = this.props;\n    if (this.timer) {\n      this.clearTimeout(this.timer);\n    }\n\n    if (animate && this.children.length > 1) {\n      this.timer = this.setTimeout(this._animateNextPage, this.props.delay);\n    }\n  }\n\n  getWidth(): number {\n    const {width} = this.props;\n    if (width) {\n      return width;\n    }\n    return Dimensions.get('window').width;\n  }\n\n  _animateNextPage() {\n    let {activePage} = this.state;\n    if (activePage < this.children.length - 1) {\n      activePage++;\n    } else if (this.props.loop) {\n      activePage = 0;\n    } else if (!this.props.loop) {\n      // no loop, clear timer\n      this.clearTimeout(this.timer);\n      return;\n    }\n\n    this.indicatorPressed(activePage);\n    this._setUpTimer();\n  }\n\n  _onAnimationBegin() {\n    const {onScrollBegin} = this.props;\n    if (onScrollBegin) {\n      onScrollBegin();\n    }\n    this.clearTimeout(this.timer);\n  }\n\n  _onAnimationEnd(activePage) {\n    const {onPageChange} = this.props;\n    if (onPageChange) {\n      onPageChange(activePage);\n    }\n    this.setState({activePage}, this._setUpTimer());\n  }\n\n  renderPageIndicator() {\n    const {hideIndicators, indicatorOffset,\n      indicatorAtBottom, indicatorSpace,\n      indicatorColor, inactiveIndicatorColor,\n      indicatorSize, indicatorText, inactiveIndicatorText} = this.props;\n    const {activePage} = this.state;\n    if (hideIndicators === true) {\n      return null;\n    }\n\n    const indicators = [];\n    const positionIndicatorStyle = indicatorAtBottom ?\n      {bottom: indicatorOffset} :\n      {top: indicatorOffset};\n    const indicatorWidth = this.children.length * indicatorSpace;\n    let style;\n    let position;\n\n    position = {\n      minWidth: indicatorWidth,\n      left: (this.getWidth() - indicatorWidth) / 2,\n    };\n\n    this.children.forEach((child, i) => {\n      style = i === activePage ?\n        {color: indicatorColor} :\n        {color: inactiveIndicatorColor};\n      indicators.push(\n        <Text\n          style={[style, {fontSize: indicatorSize}]}\n          key={i}\n          onPress={() => this.indicatorPressed(i)}\n        >\n          {i === activePage ? indicatorText : inactiveIndicatorText}\n        </Text>\n      );\n    });\n\n    // only one item don't need indicators\n    if (indicators.length === 1) {\n      return null;\n    }\n\n    return (\n      <View style={[styles.pageIndicator, position, positionIndicatorStyle]}>\n        {indicators}\n      </View>\n    );\n  }\n\n  render() {\n    const {height, contentContainerStyle, onScroll} = this.props;\n    const width = this.getWidth();\n    return (\n      <View style={{width}}>\n        <View style={{width, height, overflow: 'hidden'}}>\n          <CarouselPager\n            ref={(pager) => {\n              this.pager = pager;\n            }}\n            width={width}\n            height={height}\n            contentContainerStyle={[\n              styles.contentContainer,\n              contentContainerStyle,\n            ]}\n            onScroll={onScroll}\n            onBegin={this._onAnimationBegin}\n            onEnd={this._onAnimationEnd}\n          >\n            {this.children}\n          </CarouselPager>\n        </View>\n        {this.renderPageIndicator()}\n      </View>\n    );\n  }\n};\n\nreactMixin(Carousel.prototype, TimerMixin);\n"]},"metadata":{},"sourceType":"module"}